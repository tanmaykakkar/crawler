from django.shortcuts import render
from django.http import HttpResponse
from django.http import HttpResponseRedirect
import sys
from selenium import webdriver
from HTMLParser import HTMLParser
var = ''
class MyHTMLParser(HTMLParser):
        def __init__(self):
                HTMLParser.__init__(self)
                self.recording = 0
                self.data = ''
        def handle_starttag(self, tag, attrs):
                if tag == 'div' and ('id',var) in attrs:
                        self.recording = 1
        def handle_endtag(self, tag):
                if tag == 'div':
                        self.recording = 0
        def handle_data(self, data):
                if self.recording:
                        self.data = self.data + data + '\t'

def home(request):
	if request.method == 'POST':
		departure = request.POST['selacity1']
		arrival = request.POST['selacity2']
		ticket_type = request.POST['tkt_type']
		class_of_booking = request.POST['booking_class']
		skywards_tier = request.POST['skyward_tier']
		type_of_fare = request.POST['fare_type']
		place_dict = {'CPH': 'Copenhagen ', 'ROC': 'Rochester ', 'AGA': 'Agadir Airport ', 'ZQN': 'Queenstown ', 'SRZ': 'Santa Cruz ', 'SIA': 'Xian Xiguan Airport ', 'SIP': 'Simferopol Airport ', 'YUL': 'Montreal ', 'NYM': 'Nadym ', 'NYC': 'New York, All Airports ', 'CPT': 'Cape Town ', 'SIN': 'Singapore ', 'AGP': 'Malaga ', 'KYA': 'Konya ', 'SPU': 'Split ', 'BWI': 'Baltimore ', 'TAO': 'Qingdao ', 'LHE': 'Lahore ', 'JIB': 'Djibouti ', 'IXL': 'Leh ', 'IXM': 'Madurai ', 'IXC': 'Chandigarh ', 'IXA': 'Agartala ', 'IXD': 'Allahabad ', 'IXE': 'Mangalore ', 'LHW': 'Lanzhou ', 'MJV': 'Murcia ', 'LHR': 'London Heathrow ', 'IXR': 'Ranchi ', 'JIZ': 'Jizan ', 'IXU': 'Aurangabad ', 'AHB': 'Abha ', 'NJf': 'Najaf ', 'PQC': 'Phu Quoc ', 'JNU': 'Juneau ', 'LAD': 'Luanda ', 'AHO': 'Alghero ', 'MAA': 'Chennai ', 'JNB': 'Johannesburg ', 'LAX': 'Los Angeles ', 'MAD': 'Madrid ', 'OVD': 'Oviedo ', 'MAH': 'Menorca ', 'WUH': 'Wuhan ', 'MAO': 'Manaus ', 'LAS': 'Las Vegas ', 'TSN': 'Tianjin ', 'CMN': 'Casablanca ', 'BEL': 'Bel\xc3\xa9m ', 'CMH': 'Columbus ', 'TSE': 'Astana ', 'BEG': 'Belgrade ', 'BEY': 'Beirut ', 'TSV': 'Townsville ', 'DTW': 'Detroit ', 'BEW': 'Beira ', 'KBL': 'Kabul ', 'ODS': 'Odessa Airport ', 'VLC': 'Valencia ', 'TRN': 'Turin ', 'HUI': 'Hue ', 'CAI': 'Cairo ', 'LST': 'Launceston ', 'KBP': 'Kiev ', 'WLG': 'Wellington ', 'KBV': 'Krabi ', 'UVF': 'Saint lucia ', 'NTL': 'Newcastle ', 'ZVJ': 'Abu Dhabi ', 'IGU': 'Foz do Igua\xc3\xa7u ', 'GRU': 'S\xc3\xa3o Paulo ', 'WGA': 'Wagga Wagga ', 'BLZ': 'Blantyre ', 'BLQ': 'Bologna ', 'GRX': 'Granada ', 'BLR': 'Bengaluru ', 'BLL': 'Billund Airport ', 'DSM': 'Des Moines ', 'BLI': 'Bellingham ', 'GRJ': 'George ', 'TJM': 'Tyumen ', 'MXP': 'Milan ', 'CBR': 'Canberra ', 'LZH': 'Liuzhou ', 'OKC': 'Oklahoma City ', 'NOZ': 'Novokuznetsk ', 'IND': 'Indianapolis ', 'NOU': 'Noumea Magenta ', 'Bangalore)': 'Bengaluru ', 'KKC': 'Khon Kaen ', 'SHE': 'Shenyang ', 'DOK': 'Donetsk ', 'DOH': 'Doha ', 'CTS': 'Sapporo ', 'TRS': 'Trieste ', 'GLA': 'Glasgow ', 'REP': 'Siem Reap ', 'CTA': 'Catania ', 'AKL': 'Auckland ', 'CTL': 'Charleville ', 'REC': 'Recife ', 'DCA': 'Washington ', 'GLT': 'Gladstone ', 'REG': 'Reggio Calabria ', 'AU)': 'Roma ', 'OUG': 'Ouahigouya ', 'BSR': 'Basra ', 'MDE': 'Medellin ', 'RCB': 'Richards Bay ', 'LFT': 'Lafayette ', 'MDT': 'Harrisburg ', 'FCO': 'Rome ', 'JER': 'Jersey ', 'AUH': 'Abu Dhabi ', 'DFW': 'Dallas ', 'MLN': 'Melilla ', 'FMO': 'M\xc3\xbcnster Osnabr\xc3\xbcck ', 'AUS': 'Austin ', 'MVD': 'Montevideo ', 'BAX': 'Barnaul ', 'JED': 'Jeddah ', 'LTK': 'Latakia ', 'LTO': 'Loreto ', 'ALL': 'Albenga ', 'SPC': 'Santa Cruz De La ', 'PUJ': 'Punta cana ', 'ALG': 'Algiers ', 'EDI': 'Edinburgh ', 'ALB': 'Albany ', 'ALC': 'Alicante ', 'ALA': 'Almaty ', 'ORK': 'Cork ', 'ORF': 'Norfolk ', 'ALW': 'Walla Walla ', 'ORD': 'Chicago ', 'PUW': 'Pullman ', 'ALP': 'Aleppo ', 'DPS': 'Denpasar ', 'KOA': 'Kona ', 'ERZ': 'Erzurum ', 'IBZ': 'Ibiza ', 'CAN': 'Guangzhou ', 'DPO': 'Devonport ', 'CAG': 'Cagliari ', 'BAH': 'Bahrain ', 'IAH': 'Houston ', 'NHA': 'Nha Trang ', 'TOF': 'Tomsk ', 'HID': 'Horn Island ', 'CAE': 'Columbia ', 'IAD': 'Washington ', 'STL': 'St Louis ', 'ABI': 'Abilene ', 'ABJ': 'Abidjan ', 'STI': 'Santiago ', 'KTM': 'Kathmandu ', 'KTN': 'Ketchikan ', 'HGH': 'Hangzhou ', 'ABX': 'Albury ', 'ABZ': 'Aberdeen ', 'KTA': 'Karratha ', 'ZRH': 'Z\xc3\xbcrich ', 'UDR': 'Udaipur ', 'MJT': 'Mitilini ', 'TFN': 'Tenerife North ', 'BHO': 'Bhopal ', 'OGZ': 'Vladikavkaz ', 'PNQ': 'Pune ', 'BHD': 'Belfast ', 'BHX': 'Birmingham ', 'NCL': 'Newcastle ', 'PNA': 'Pamplona ', 'OGG': 'Kahului ', 'RSW': 'Fort Myers ', 'CFS': 'Coffs Harbour ', 'TFS': 'Tenerife South ', 'JFK': 'New York ', 'DKR': 'Dakar ', 'ZNE': 'Newman ', 'MIA': 'Miami ', 'LIM': 'Lima ', 'LIH': 'Kauai Island ', 'VAR': 'Varna ', 'FNC': 'Funchal ', 'FNA': 'Freetown ', 'LIS': 'Lisbon ', 'PRG': 'Prague ', 'SAH': "Sana'a ", 'SAN': 'San Diego ', 'LBV': 'Libreville ', 'RAO': 'Ribeir\xc3\xa3o Preto ', 'NQY': 'Newquay ', 'RAJ': 'Rajkot ', 'RAK': 'Marrakech ', 'AOI': 'Ancona ', 'RAI': 'Praia ', 'LBA': 'Leeds ', 'PPP': 'Proserpine ', 'AOR': 'Alor Setar ', 'JOG': 'Adi Sutjipto International Airport ', 'SAT': 'San Antonio ', 'SKP': 'Skopje ', 'TPE': 'Taipei ', 'CHC': 'Christchurch ', 'JAX': 'Jacksonville ', 'URC': 'Urumqi ', 'MRU': 'Mauritius ', 'MRV': 'Mineralnyye Vody ', 'LPT': 'Lampang ', 'BFN': 'Bloemfontein ', 'CHO': 'Charlottesville ', 'CHQ': 'Chania ', 'd="': 'Mumbai ', 'CHS': 'Charlestown ', 'ISU': 'Sulaymaniyah ', 'HRK': 'Kharkiv ', 'JAI': 'Jaipur ', 'HRE': 'Harare ', 'AYT': 'Antalya ', 'AYQ': 'Ayers Rock ', 'LPA': 'Gran Canaria ', 'HRB': 'Harbin ', 'TYO': 'Tokyo All ', 'DBO': 'Dubbo ', 'VIE': 'Vienna ', 'SDR': 'Santander ', 'NIM': 'Niamey ', 'KAN': 'Kano Airport ', 'SFO': 'San Francisco ', 'APL': 'Nampula ', 'VIX': 'Vit\xc3\xb3ria ', 'TYS': 'Knoxville ', 'NGB': 'Ningbo ', 'MUB': 'Maun ', 'HDY': 'Hat Yai ', 'FUE': 'Fuerteventura ', 'PHE': 'Port Hedland ', 'FUK': 'Fukuoka ', 'OVB': 'Novosibirsk ', 'CEB': 'Cebu ', 'CCU': 'Kolkata ', 'BME': 'Broome ', 'CEK': 'Chelyabinsk ', 'CEI': 'Chiang Rai ', 'TKU': 'Turku ', 'BMV': 'Banmethuot ', 'HMB': 'Sohag ', 'DLC': 'Dalian ', 'DLA': 'Douala ', 'SHV': 'Shreveport Regional Airport ', 'GCI': 'Guernsey ', 'DLI': 'Dalat ', 'SLP': 'San Luis Potosi ', 'DLM': 'Dalaman ', 'CSX': 'Changsha ', 'OXB': 'Bissau ', 'BTV': 'Burlington ', 'SSX': 'Samsun ', 'ABQ': 'Albuquerque ', 'TBS': 'Tbilisi ', 'BTZ': 'Bursa Airport ', 'CZM': 'Cozumel ', 'GZT': 'Gaziantep ', 'MAN': 'Manchester ', 'SSA': 'Salvador ', 'BTK': 'Bratsk ', 'BKO': 'Bamako ', 'Madinah)': 'Medina ', 'ABV': 'Abuja Airport ', 'SKT': 'Sialkot ', 'LUX': 'Luxembourg ', 'ATL': 'Atlanta ', 'CRP': 'Corpus Christi ', 'ATH': 'Athens ', 'IST': 'Istanbul ', 'YHZ': 'Halifax ', 'GBE': 'Gaborone ', 'MUC': 'Munich ', 'ATQ': 'Amritsar ', 'ISB': 'Islamabad ', 'ISA': 'Mount Isa ', 'ATZ': 'Asyut ', 'LUN': 'Lusaka ', 'DME': 'Moscow ', 'ASR': 'Kayseri ', 'ASP': 'Alice Springs ', 'EVN': 'Yerevan ', 'NUX': 'Novy Urengoy ', 'ECN': 'Ercan ', 'SEZ': 'Seychelles ', 'ASB': 'Ashgabat ', 'ASF': 'Astrakhan ', 'SEA': 'Seattle ', 'NUE': 'Nuremberg ', 'Ka San)': 'Kazan ', 'TLS': 'Toulouse ', 'FRA': 'Frankfurt ', 'CLO': 'Cali ', 'BBK': 'Kasane ', 'PVG': 'Shanghai ', 'PDX': 'Portland ', 'CLE': 'Cleveland ', 'DUB': 'Dublin ', 'DUD': 'Dunedin ', 'CMB': 'Colombo ', 'FRU': 'Bishkek ', 'CLT': 'Charlotte ', 'DUR': 'Durban ', 'DUS': 'D\xc3\xbcsseldorf ', 'PMO': 'Palermo ', 'KEJ': 'Kemerovo ', 'HVB': 'Hervey Bay ', 'TUU': 'Tabuk ', 'OMS': 'Omsk ', 'TUL': 'Tulsa ', 'TUN': 'Tunis ', 'RPR': 'Raipur ', 'UUD': 'Ulan-Ude ', 'SWA': 'Shantou ', 'AAL': 'Aalborg ', 'AAN': 'Al Ain ', 'TPA': 'Tampa ', 'YWG': 'Winnipeg ', 'KJA': 'Krasnoyarsk Yemelyanovo ', 'AAQ': 'Anapa ', 'AAR': 'Aarhus ', 'BIO': 'Bilbao ', 'GYD': 'Baku ', 'KWE': 'Guiyang ', 'PNH': 'Phnom Penh ', 'KWI': 'Kuwait ', 'GYN': 'Goi\xc3\xa2nia ', 'KWL': 'Guilin ', 'POP': 'Puerto Plata ', 'POL': 'Pemba ', 'PHL': 'Philadelphia ', 'EUG': 'Eugene ', 'POA': 'Porto Alegre ', 'MLA': 'Malta ', 'GOI': 'Goa ', 'VCE': 'Venice ', 'SLZ': 'S\xc3\xa3o Luis ', 'MLE': 'Male ', 'FKB': 'Baden Baden ', 'GOA': 'Genoa ', 'AJU': 'Aracaj\xc3\xba ', 'SLL': 'Salalah ', 'CWL': 'Cardiff ', 'GOT': 'G\xc3\xb6teborg ', 'MLX': 'Malatya ', 'GOV': 'Gove ', 'SLC': 'Salt Lake City ', 'MCO': 'Orlando ', 'LGK': 'Langkawi ', 'CFU': 'Corfu ', 'Calicut)': 'Kozhikode ', 'MCI': 'Kansas City ', 'JPA': 'Jo\xc3\xa3o Pessoa ', 'NCE': 'Nice ', 'MCZ': 'Macei\xc3\xb3 ', 'MCY': 'Sunshine Coast ', 'OTP': 'Bucharest ', 'MCT': 'Muscat ', 'LGW': 'London Gatwick ', 'NRT': 'Tokyo Narita ', 'YLW': 'Kelowna ', 'CKG': 'Chongqing ', 'PAT': 'Patna ', 'BGI': 'Bridgetown ', 'BGO': 'Bergen ', 'BGR': 'Bangor ', 'Calcutta)': 'Kolkata ', 'BGW': 'Baghdad ', 'CKY': 'Conakry ', 'ADL': 'Adelaide ', 'PZU': 'Port Sudan ', 'TZX': 'Trabzon ', 'MQL': 'Mildura ', 'SYR': 'Syracuse ', 'WDH': 'Windhoek ', 'VNS': 'Varanasi ', 'RIC': 'Richmond ', 'HAJ': 'Hanover ', 'HAK': 'Haikou ', 'HAM': 'Hamburg ', 'HAN': 'Hanoi ', 'MED': 'Medina ', 'OAK': 'Oakland ', 'WEI': 'Weipa ', 'THS': 'Sukhothai ', 'BNK': 'Ballina ', 'BUS)': 'Nagoya ', 'DRW': 'Darwin ', 'BNA': 'Nashville ', 'HAS': "Ha'il ", 'BNE': 'Brisbane ', 'MZT': 'Mazatlan ', 'KIX': 'Osaka ', 'LXR': 'Luxor ', 'SYD': 'Sydney ', 'ZAG': 'Zagreb ', 'YEG': 'Edmonton ', 'MEM': 'Memphis ', 'PHX': 'Phoenix ', 'ZAZ': 'Zaragoza ', 'KIN': 'Kingston ', 'KIM': 'Kimberley ', 'MEL': 'Melbourne ', 'SYX': 'Sanya ', 'EMD': 'Emerald ', 'AES': 'Aalesund ', 'AER': 'Adler-Sochi ', 'CRW': 'Charleston ', 'DMM': 'Dammam ', 'SKG': 'Thessaloniki ', 'DMS': 'Khobar Sabtco Bus Station ', 'CRK': 'Clark International ', 'RGN': 'Yangon ', 'JUB': 'Jub ', 'LDB': 'Londrina ', 'GET': 'Geraldton ', 'BUR': 'Burbank ', 'LDH': 'Lord Howe Island ', 'MFR': 'Medford ', 'GEG': 'Spokane ', 'BUF': 'Buffalo ', 'BUD': 'Budapest ', 'VGO': 'Vigo ', 'FOR': 'Fortaleza ', 'YKM': 'Yakima ', 'YKS': 'Yakutsk ', 'XRY': 'Jerez De La Fron ', 'HND': 'Tokyo Haneda ', 'FOC': 'Fuzhou ', 'MHT': 'Manchester ', 'MHU': 'Mount Hotham ', 'LJU': 'Ljubljana ', 'ANC': 'Anchorage ', 'GIG': 'Rio de Janeiro ', 'PSC': 'Pasco ', 'PSA': 'Pisa ', 'MOV': 'Moranbah ', 'PSE': 'Ponce ', 'LCG': 'La Coruna ', 'LCA': 'Larnaca ', 'PSR': 'Pescara ', 'OPO': 'Porto ', 'STR': 'Stuttgart ', 'UDI': 'Uberl\xc3\xa2ndia ', 'KMG': 'Kunming ', 'BCN': 'Barcelona ', 'BCI': 'Barcaldine ', 'TMW': 'Tamworth ', 'PEW': 'Peshawar ', 'HNL': 'Honolulu ', 'PER': 'Perth ', 'PEN': 'Penang ', 'HKT': 'Phuket ', 'PEK': 'Beijing ', 'PEE': 'Perm Oblast ', 'COK': 'Kochi ', 'NJC': 'Nizhnevartovsk ', 'VVO': 'Vladivostok ', 'IKT': 'Irkutsk ', 'ZBL': 'Biloela ', 'SXR': 'Srinagar ', 'OLP': 'Olympic Dam ', 'IKA': 'Tehran ', 'MSU': 'Maseru ', 'LYA': 'Luoyang ', 'XMN': 'Xiamen ', 'HER': 'Heraklion ', 'PQQ': 'Port Macquarie ', 'KRR': 'Krasnodar ', 'KRS': 'Kristiansand ', 'SJC': 'San Jose ', 'KRT': 'Khartoum ', 'KRK': 'Krakow ', 'SRQ': 'Sarasota ', 'HEL': 'Helsinki ', 'RUH': 'Riyadh ', 'CDG': 'Paris ', 'UFA': 'Ufa ', 'BJL': 'Banjul ', 'PLZ': 'Port Elizabeth ', 'YYZ': 'Toronto ', 'BJV': 'Bodrum ', 'TDX': 'Trat ', 'YYC': 'Calgary ', 'PLO': 'Port Lincoln ', 'BJZ': 'Badajoz ', 'YYJ': 'Victoria ', 'MKE': 'Milwaukee ', 'JHB': 'Johor Bahru ', 'HYD': 'Hyderabad ', 'GNY': 'Sanliurfa ', 'LON': 'London ', 'HAV': 'Havana ', 'LOS': 'Lagos ', 'DIY': 'Diyarbakir ', 'CVG': 'Cincinnati ', 'MKY': 'Mackay ', 'NSI': 'Yaound\xc3\xa9 ', 'NSK': 'Norilsk ', 'MRZ': 'Moree ', 'MBJ': 'Montego Bay ', 'SOF': 'Sofia ', 'GAU': 'Guwahati ', 'MBA': 'Mombasa ', 'FAT': 'Fresno ', 'FAI': 'Fairbanks ', 'FAO': 'Faro ', 'MTY': 'Monterrey ', 'UTH': 'Udon Thani ', 'HPH': 'Haiphong ', 'YOW': 'Ottawa ', 'POZ': 'Poznan ', 'MRS': 'Marseille ', 'VKG': 'Rach Gia ', 'SDQ': 'Santo Domingo ', 'EBB': 'Entebbe ', 'EBL': 'Erbil ', 'SDF': 'Louisville ', 'RJL': 'Logrono ', 'Cochin)': 'Kochi ', 'ARM': 'Armidale ', 'ARN': 'Stockholm ', 'SDK': 'Sandakan ', 'NAG': 'Nagpur ', 'CTU': 'Chengdu ', 'HBE': 'Alexandria ', 'DRS': 'Dresden ', 'BOS': 'Boston ', 'HBA': 'Hobart ', 'CCS': 'Caracas ', 'BOI': 'Boise ', 'NAP': 'Naples ', 'BOM': 'Mumbai ', 'NAT': 'Natal ', 'CCJ': 'Kozhikode ', 'Trivandrum)': 'Thiruvananthapuram ', 'TIF': 'Ta\xc3\xa2\xc2\x80\xc2\x99if ', 'BOD': 'Bordeaux ', 'TIA': 'Tirana ', 'GSO': 'Greensboro ', 'BOG': 'Bogota ', 'MYY': 'Miri ', 'LYS': 'Lyon ', 'NNG': 'Nanning ', 'UIH': 'Qui Nhon ', 'MYR': 'Myrtle Beach ', 'SXM': 'St Maarten ', 'KHV': 'Khabarovsk ', 'KHH': 'Kaohsiung ', 'KHI': 'Karachi ', 'IOM': 'Isle of Man ', 'ZIH': 'Ixtapa ', 'KHN': 'Nanchang ', 'PIT': 'Pittsburgh ', 'HKG': 'Hong Kong ', 'YVR': 'Vancouver ', 'BQN': 'Aguadilla ', 'SVG': 'Stavanger ', 'SVX': 'Ekaterinburg ', 'SGC': 'Surgut ', 'SVQ': 'Sevilla ', 'UBP': 'Ubon Ratchathani ', 'EAT': 'Wenatchee ', 'NAS': 'Nassau ', 'LKO': 'Lucknow ', 'VII': 'Vinh City ', 'MWZ': 'Mwanza Airport ', 'ZLO': 'Manzanillo ', 'FLR': 'Florence ', 'BZO': 'Bolzano ', 'DEL': 'Delhi ', 'FLL': 'Fort Lauderdale ', 'DEN': 'Denver ', 'FLN': 'Florian\xc3\xb3polis ', 'VDH': 'Dong Hoi ', 'ICN': 'Seoul ', 'SCL': 'Santiago De Chile ', 'ROK': 'Rockhampton ', 'AMM': 'Amman ', 'ROA': 'Roanoke ', 'GOJ': 'Nizhniy Novgorod ', 'LLW': 'Lilongwe ', 'AMD': 'Ahmedabad ', 'MNL': 'Manila ', 'OSL': 'Oslo ', 'PTY': 'Panama City ', 'AMS': 'Amsterdam Schiphol ', 'SCQ': 'Santiago De Comp ', 'ROV': 'Rostov ', 'BDA': 'Bermuda ', 'RHO': 'Rhodes ', 'BDB': 'Bundaberg ', 'CJB': 'Coimbatore ', 'BDL': 'Hartford ', 'TRC': 'Torreon ', 'TRD': 'Trondheim ', 'TRZ': 'Tiruchirapally ', 'BDQ': 'Vadodara ', 'BDS': 'Brindisi ', 'PBO': 'Paraburdoo ', 'PBI': 'West Palm Beach ', 'TRV': 'Thiruvananthapuram ', 'VOG': 'Volgograd ', 'LRE': 'Longreach ', 'AVV': 'Avalon ', 'MPM': 'Maputo ', 'KCH': 'Kuching ', 'HTI': 'Hamilton Island ', 'AVL': 'Asheville ', 'HTY': 'Hatay ', 'ACC': 'Accra ', 'SUF': 'Lamezia Terme ', 'EXT': 'Exeter ', 'ACE': 'Lanzarote ', 'IDR': 'Indore ', 'XNA': 'Fayetteville ', 'KUL': 'Kuala Lumpur ', 'KUF': 'Samara ', 'HFE': 'Hefei ', 'YQR': 'Regina ', 'CGK': 'Jakarta ', 'CWB': 'Curitiba ', 'CGO': 'Zhengzhou ', 'CGN': 'Cologne ', 'CGB': 'Cuiab\xc3\xa1 ', 'BKI': 'Kota Kinabalu ', 'BKK': 'Bangkok ', 'NBO': 'Nairobi ', 'BKQ': 'Blackall ', 'CGP': 'Chittagong ', 'CGR': 'Campo Grande ', 'PMI': 'Palma De Mallorc ', 'RDU': 'Raleigh ', 'CUU': 'Chihuahua ', 'NGO': 'Nagoya ', 'VIT': 'Vitoria Airport ', 'ZVH': 'Al Ain ', 'DNK': 'Dnipropetrovsk Airport ', 'SJU': 'San Juan ', 'ADD': 'Addis Ababa ', 'ADB': 'Izmir ', 'WRO': 'Wroclaw ', 'ADA': 'Adana ', 'RDM': 'Redmond ', 'CUN': 'Cancun ', 'ELP': 'El Paso ', 'ELQ': 'Buraidah ', 'TIP': 'Tripoli ', 'DNZ': 'Denizli ', 'LEA': 'Learmonth ', 'LED': 'St. Petersburg ', 'JRO': 'Kilimanjaro ', 'LEI': 'Almeria ', 'BRU': 'Brussels ', 'LEN': 'Leon ', 'VRN': 'Verona ', 'LGB': 'Long Beach ', 'BSB': 'Brasilia ', 'BRI': 'Bari ', 'LEX': 'Lexington ', 'GDL': 'Guadalajara ', 'MEX': 'Mexico City ', 'GDN': 'Gdansk ', 'AUA': 'Aruba ', 'FLO': 'Florence ', 'MSY': 'New Orleans ', 'USM': 'Koh Samui ', 'YNB': 'Yanbu ', 'MSP': 'Minneapolis ', 'LWO': 'Lviv Airport ', 'DAD': 'Da Nang ', 'TXL': 'Berlin ', 'DAC': 'Dhaka ', 'DAM': 'Damascus ', 'TUS': 'Tucson ', 'PXU': 'Pleiku ', 'NGY': 'Nagoya ', 'DAR': 'Dar Es Salaam ', 'SGN': 'Ho Chi Minh City ', 'EAS': 'San Sebastian ', 'SMF': 'Sacramento ', 'DAY': 'Dayton ', 'WAW': 'Warsaw ', 'CNS': 'Cairns ', 'TNR': 'Antananarivo ', 'GVA': 'Geneva ', 'CNX': 'Chiang Mai ', 'CNF': 'Belo Horizonte ', 'ESB': 'Ankara ', 'CNJ': 'Cloncurry ', 'PWM': 'Portland ', 'NKC': 'Nouakchott ', 'NKG': 'Nanjing ', 'OOL': 'Gold Coast ', 'ELS': 'East London ', 'KGD': 'Kaliningrad ', 'KGI': 'Kalgoorlie ', 'EZE': 'Buenos Aires ', 'DXB': 'Dubai '}

		url = "http://www.emirates.com/account/english/miles-calculator/miles-calculator.aspx?org=BOM&dest=JFK&trvc=0&h=7b1dc440b5eecbda143bd8e7b9ef53a27e364b"
		global var
		var = skywards_tier + ticket_type + 'Earn'
		result = []
		driver = webdriver.Firefox()
		driver.get(url)
		
		### fill form ###
		d = driver.find_element_by_id("ddlDepartureAirport-suggest")
		d.clear()
		d.send_keys(departure)

		a = driver.find_element_by_id("ddlArrivalAirport-suggest")
		a.clear()
		a.send_keys(place_dict[arrival][:-1])

		if class_of_booking == 'Economy':
			driver.find_element_by_css_selector("td.last").click()
        	elif class_of_booking == 'Business':
			driver.find_element_by_xpath("//div[@id='cabinSelect']/div[3]/div/table[2]/tbody/tr/td[2]").click()
        	elif class_of_booking == 'First':
			driver.find_element_by_css_selector("table.radioHandlers > tbody > tr > td").click()
		driver.find_element_by_id("MainContent_ctl02_btnSubmit").click()
		html = driver.page_source
		driver.quit()
		p = MyHTMLParser()
		p.feed(html)
		try:
			result = p.data[37:].split('\t')[1:-2]
			if type_of_fare == 'saver':
        			result = [result[0], result[2]]
			elif type_of_fare == 'flex':
        			result = [result[1], result[3]]
		except IndexError:
			result = ["Not Available","Not Available"]
		return render(request,'result.html',{"results":result})
	return render(request, "home.html")

